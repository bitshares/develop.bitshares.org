(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1728:function(e,t,a){"use strict";a.d(t,"b",function(){return y}),a.d(t,"a",function(){return E});var n=a(0),r=a.n(n),s=a(1),l=a.n(s),o=a(7),i=a.n(o),c=a(34),u=a(21),m=a(20),p=a(16),d=a.n(p),h=a(2002),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=function(e){function t(){return b(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,r.a.Component),f(t,[{key:"render",value:function(){var e=this.props,t=e.isActive,a=e.index,n=e.changeTab,s=e.title,l=e.className,o=e.updatedTab,c=e.disabled,u=e.subText,m=i()({"is-active":t},l);return"string"==typeof s&&s.indexOf(".")>0&&(s=d.a.translate(s)),this.props.collapsed?("string"==typeof u&&(u=u.trim()),r.a.createElement("option",{value:a,"data-is-link-to":this.props.isLinkTo},r.a.createElement("span",{className:"tab-title"},s,o?"*":"",u&&" (",u&&u,u&&")"))):r.a.createElement("li",{className:m,onClick:c?null:n.bind(this,a,this.props.isLinkTo)},r.a.createElement("a",null,r.a.createElement("span",{className:"tab-title"},s,o?"*":""),u&&r.a.createElement("div",{className:"tab-subtext"},u)))}}]),t}();E.propTypes={changeTab:l.a.func,isActive:l.a.bool.isRequired,index:l.a.number.isRequired,className:l.a.string,isLinkTo:l.a.string,subText:l.a.oneOfType([l.a.object,l.a.string])},E.defaultProps={isActive:!1,index:0,className:"",isLinkTo:"",subText:null};var y=function(e){function t(e){b(this,t);var a=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={activeTab:e.setting?e.viewSettings.get(e.setting,e.defaultActiveTab):e.defaultActiveTab,width:window.innerWidth},a._setDimensions=a._setDimensions.bind(a),a}return g(t,r.a.Component),f(t,[{key:"componentDidMount",value:function(){this._setDimensions(),window.addEventListener("resize",this._setDimensions,{capture:!1,passive:!0})}},{key:"componentWillReceiveProps",value:function(e){var t=e.viewSettings.get(e.setting);t!==this.props.viewSettings.get(this.props.setting)&&this.setState({activeTab:t})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._setDimensions)}},{key:"_setDimensions",value:function(){var e=window.innerWidth;e!==this.state.width&&this.setState({width:e})}},{key:"_changeTab",value:function(e,t){e!==this.state.activeTab&&(""!==t&&this.props.history.push(t),this.props.setting&&u.a.changeViewSetting(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},this.props.setting,e)),this.setState({activeTab:e}),this.props.onChangeTab&&this.props.onChangeTab(e))}},{key:"render",value:function(){var e=this,t=this.props,a=t.children,n=t.contentClass,s=t.tabsClass,l=t.style,o=t.segmented,c=this.state.width<900&&r.a.Children.count(a)>2,u=null,m=r.a.Children.map(a,function(t,a){if(!t)return null;if(c&&t.props.disabled)return null;var n=a===e.state.activeTab;return n&&(u=t.props.children),r.a.cloneElement(t,{collapsed:c,isActive:n,changeTab:e._changeTab.bind(e),index:a})}).filter(function(e){return null!==e});return u||(u=m[0].props.children),r.a.createElement("div",{className:i()(this.props.actionButtons?"with-buttons":"",this.props.className)},r.a.createElement("div",{className:"service-selector"},r.a.createElement("ul",{style:l,className:i()("button-group no-margin",s,{segmented:o})},c?r.a.createElement("li",{style:{paddingLeft:10,paddingRight:10,minWidth:"15rem"}},r.a.createElement("select",{value:this.state.activeTab,style:{marginTop:10,marginBottom:10},className:"bts-select",onChange:function(t){var a=parseInt(t.target.value,10);e._changeTab(a,t.target[a].attributes["data-is-link-to"].value)}},m)):m,this.props.actionButtons?r.a.createElement("li",{className:"tabs-action-buttons"},this.props.actionButtons):null)),r.a.createElement("div",{className:i()("tab-content",n)},u))}}]),t}();y.propTypes={setting:l.a.string,defaultActiveTab:l.a.number,segmented:l.a.bool},y.defaultProps={active:0,defaultActiveTab:0,segmented:!0,contentClass:"",style:{}},y=Object(c.connect)(y,{listenTo:function(){return[m.a]},getProps:function(){return{viewSettings:m.a.getState().viewSettings}}}),y=Object(h.a)(y)},1752:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(1),l=a.n(s),o=a(32),i=a(37),c=a(43),u=a(132),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),m(t,[{key:"getFee",value:function(){return Object(u.c)(this.props.opType,this.props.options,this.props.globalObject)}},{key:"render",value:function(){var e=this.props,t=e.opType,a=e.options,n=e.globalObject;if(!t||!a||!n)return null;var s=Object(u.c)(t,a,n);return r.a.createElement(o.a,{amount:s,asset:"1.3.0"})}}]),t}();p.propTypes={globalObject:i.a.ChainObject.isRequired,opType:l.a.string,options:l.a.array},p.defaultProps={globalObject:"2.0.0",options:[]},t.a=Object(c.a)(p)},1773:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(7),l=a.n(s),o=a(3),i=a.n(o),c=a(29),u=a(234),m=a(283),p=a(32),d=a(1752),h=a(396),f=a(107),b=a(9),_=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var g=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return function(n){return e.setState(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},t,a(n)))}},E=function(e){return function(t){return t[e]}},y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onAccountNameChanged=g(a,"funderAccountName"),a.onAccountChanged=g(a,"newFunderAccount"),a.onPoolInput=g(a,"fundPoolAmount",E("amount")),a.onFundPool=function(){return h.a.fundPool(a.state.newFunderAccount?a.state.newFunderAccount.get("id"):null,a.props.core,a.props.asset,a.state.fundPoolAmount.replace(/,/g,""))},a.reset=function(){a.setState(a.initialState())},a.initialState=function(){return{funderAccountName:a.props.funderAccountName,fundPoolAmount:0,fundPoolAsset:new c.a({amount:0,precision:a.props.core.get("precision"),asset_id:a.props.core.get("id")}),claimPoolAmount:0,claimPoolAsset:new c.a({amount:0,precision:a.props.core.get("precision"),asset_id:a.props.core.get("id")})}},a.onClaim=function(){return h.a.claimPool(a.props.asset,a.state.claimPoolAsset)},a.state=a.initialState(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),_(t,[{key:"onClaimInput",value:function(e){var t=e.amount;this.state.claimPoolAsset.setAmount({real:t}),this.setState({claimPoolAmount:t})}},{key:"renderFundPool",value:function(){var e=this.props,t=this.state,a=this.onPoolInput,n=this.onFundPool,s=this.reset,o=this.onAccountNameChanged,c=this.onAccountChanged,h=e.asset,f=e.core,_=e.hideBalance,g=e.getDynamicObject,E=t.funderAccountName,y=t.fundPoolAmount,v=t.newFunderAccount,k=null;_||(k=g(h.get("dynamic_asset_data_id")));var w=f.get("id")||"1.3.0",O=0;if(v){var x=v.getIn(["balances",w]);if(x){var A=b.b.getObject(x);A&&(O=A.get("balance"))}}var N=r.a.createElement("span",null,r.a.createElement(i.a,{component:"span",content:"transfer.available"}),": ",r.a.createElement(p.a,{amount:O,asset:w}));return r.a.createElement("div",null,_||r.a.createElement("div",{style:{paddingBottom:"1.5rem"}},r.a.createElement(i.a,{content:"explorer.asset.fee_pool.pool_balance"}),r.a.createElement("span",null,": "),k?r.a.createElement(p.a,{amount:k.get("fee_pool"),asset:w}):null),r.a.createElement(u.a,{label:"transaction.funding_account",accountName:E,onChange:o,onAccountChanged:c,account:E,error:null,tabIndex:1}),r.a.createElement(m.a,{label:"transfer.amount",display_balance:N,amount:y,onChange:a,asset:w,assets:[w],placeholder:"0.0",tabIndex:2,style:{width:"100%",paddingTop:16}}),r.a.createElement("div",{style:{paddingTop:"1rem"},className:"button-group"},r.a.createElement("button",{className:l()("button",{disabled:y<=0}),onClick:n},r.a.createElement(i.a,{content:"transaction.trxTypes.asset_fund_fee_pool"})),r.a.createElement("button",{className:"button outline",onClick:s},r.a.createElement(i.a,{content:"account.perm.reset"}))),r.a.createElement("p",null,r.a.createElement(i.a,{content:"account.user_issued_assets.approx_fee"}),":"," ",r.a.createElement(d.a,{opType:"asset_fund_fee_pool"})))}},{key:"renderClaimPool",value:function(){var e=this,t=this.props,a=this.onClaim,n=this.reset,s=this.state.claimPoolAmount,o=t.asset,c=t.core,u=(0,t.getDynamicObject)(o.get("dynamic_asset_data_id")),h=c.get("id")||"1.3.0",f=u?r.a.createElement("span",{onClick:function(){e.state.claimPoolAsset.setAmount({sats:u.get("fee_pool")}),e.setState({claimPoolAmount:e.state.claimPoolAsset.getAmount({real:!0})})}},r.a.createElement(i.a,{component:"span",content:"transfer.available"}),": ",r.a.createElement(p.a,{amount:u.get("fee_pool"),asset:h})):null;return r.a.createElement("div",null,r.a.createElement(i.a,{component:"p",content:"explorer.asset.fee_pool.claim_pool_text"}),r.a.createElement(m.a,{label:"transfer.amount",display_balance:f,amount:s,onChange:this.onClaimInput.bind(this),asset:h,assets:[h],placeholder:"0.0",tabIndex:2,style:{width:"100%",paddingTop:16}}),r.a.createElement("div",{style:{paddingTop:"1rem"},className:"button-group"},r.a.createElement("button",{className:l()("button",{disabled:s<=0}),onClick:a},r.a.createElement(i.a,{content:"transaction.trxTypes.asset_claim_fee_pool"})),r.a.createElement("button",{className:"button outline",onClick:n},r.a.createElement(i.a,{content:"account.perm.reset"}))),r.a.createElement("p",null,r.a.createElement(i.a,{content:"account.user_issued_assets.approx_fee"}),":"," ",r.a.createElement(d.a,{opType:"asset_claim_pool"})))}},{key:"render",value:function(){return"fund"===this.props.type?this.renderFundPool():"claim"===this.props.type?this.renderClaimPool():void 0}}]),t}();y.defaultProps={type:"fund"},y=Object(f.a)(y,{propNames:["asset","core"],defaultProps:{core:"1.3.0"},withDynamic:!0}),t.a=y},2004:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(2016),l=a(3),o=a.n(l),i=a(131),c=a(107),u=a(32),m=a(141),p=a(130),d=a(497),h=a(492),f=a(313),b=a(15),_=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={time:e.time},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),_(t,[{key:"getHours",value:function(e){return e/3600}},{key:"render",value:function(){return r.a.createElement("div",null,this.getHours(this.state.time),"h")}}]),t}(),E=a(9),y=a(13),v=a(29),k=a(499),w=a(1773),O=a(26),x=a(34),A=a(234),N=a(37),P=a(43),T=a(1752),C=a(7),j=a.n(C),S=a(396),R=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var D=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={new_issuer_account_id:null,issuer_account_name:null},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),R(t,[{key:"onAccountNameChanged",value:function(e,t){this.setState(q({},e,t))}},{key:"onAccountChanged",value:function(e,t){this.setState(q({},e,t?t.get("id"):null))}},{key:"onSubmit",value:function(){var e=this;S.a.updateOwner(this.props.asset,this.state.new_issuer_account_id).then(function(){e.onReset()})}},{key:"onReset",value:function(){this.setState({new_issuer_account_id:null,issuer_account_name:null})}},{key:"render",value:function(){var e=this.props.currentOwner;return r.a.createElement("div",null,r.a.createElement("div",{style:{paddingBottom:"1rem"}},r.a.createElement(A.a,{label:"account.user_issued_assets.current_issuer",accountName:e.get("name"),account:e.get("name"),error:null,tabIndex:1,disabled:!0})),r.a.createElement(A.a,{label:"account.user_issued_assets.new_issuer",accountName:this.state.issuer_account_name,onChange:this.onAccountNameChanged.bind(this,"issuer_account_name"),onAccountChanged:this.onAccountChanged.bind(this,"new_issuer_account_id"),account:this.state.issuer_account_name,error:null,tabIndex:1,typeahead:!0,excludeAccounts:[e.get("name")]}),r.a.createElement("div",{style:{paddingTop:"1rem"},className:"button-group"},r.a.createElement("button",{className:j()("button",{disabled:!this.state.new_issuer_account_id}),onClick:this.onSubmit.bind(this)},r.a.createElement(o.a,{content:"account.user_issued_assets.update_owner"})),r.a.createElement("button",{className:"button outline",onClick:this.onReset.bind(this)},r.a.createElement(o.a,{content:"account.perm.reset"}))),r.a.createElement("p",null,r.a.createElement(o.a,{content:"account.user_issued_assets.approx_fee"}),":"," ",r.a.createElement(T.a,{opType:"asset_update_issuer"})))}}]),t}();D.propTypes={account:N.a.ChainAccount.isRequired,currentOwner:N.a.ChainAccount.isRequired};var F=D=Object(P.a)(D),I=a(1728),B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},L=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function W(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var U=function(e){function t(){return J(this,t),M(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return W(t,r.a.Component),L(t,[{key:"render",value:function(){var e=this.props,t=e.isSet,a=e.name;return t?r.a.createElement("span",{className:"asset-flag"},r.a.createElement("span",{className:"label info"},r.a.createElement(o.a,{content:"account.user_issued_assets."+a}))):r.a.createElement("span",null)}}]),t}(),G=function(e){function t(){return J(this,t),M(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return W(t,r.a.Component),L(t,[{key:"render",value:function(){var e=this.props,t=e.isSet,a=e.name;return t?r.a.createElement("span",{className:"asset-flag"},r.a.createElement("span",{className:"label info"},r.a.createElement(o.a,{content:"account.user_issued_assets."+a}))):r.a.createElement("span",null)}}]),t}(),H=function(e){function t(e){J(this,t);var a=M(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={callOrders:[],marginTableSort:"price",sortDirection:!0},a}return W(t,r.a.Component),L(t,[{key:"componentWillMount",value:function(){var e=this;if(this.props.asset.has("bitasset")){var t,a=(z(t={},this.props.asset.get("id"),this.props.asset.toJS()),z(t,this.props.backingAsset.get("id"),this.props.backingAsset.toJS()),t),n=this.props.asset.getIn(["bitasset","is_prediction_market"],!1),r=this.props.asset.getIn(["bitasset","current_feed","maximum_short_squeeze_ratio"]),s=this.props.asset.getIn(["bitasset","current_feed","settlement_price"]);n&&s.getIn(["base","asset_id"])===s.getIn(["quote","asset_id"])&&(a[this.props.backingAsset.get("id")]||(a[this.props.backingAsset.get("id")]={precision:this.props.asset.get("precision")}),s=(s=(s=(s=s.setIn(["base","amount"],1)).setIn(["base","asset_id"],this.props.backingAsset.get("id"))).setIn(["quote","amount"],1)).setIn(["quote","asset_id"],this.props.asset.get("id")),r=1e3);try{var l=new v.c({priceObject:s,market_base:this.props.asset.get("id"),sqr:r,assets:a});y.a.instance().db_api().exec("get_call_orders",[this.props.asset.get("id"),300]).then(function(t){var r=t.map(function(t){return new v.b(t,a,e.props.asset.get("id"),l,n)});e.setState({callOrders:r})})}catch(e){}}}},{key:"_toggleSortOrder",value:function(e){e!==this.state.marginTableSort?this.setState({marginTableSort:e}):this.setState({sortDirection:!this.state.sortDirection})}},{key:"_assetType",value:function(e){return"bitasset"in e?e.bitasset.is_prediction_market?"Prediction":"Smart":"Simple"}},{key:"renderFlagIndicators",value:function(e,t){return r.a.createElement("div",null,t.map(function(t){return r.a.createElement(U,{key:"flag_"+t,name:t,isSet:e[t]})}))}},{key:"renderPermissionIndicators",value:function(e,t){return r.a.createElement("div",null,t.map(function(t){return r.a.createElement(G,{key:"perm_"+t,name:t,isSet:e[t]})}))}},{key:"formattedPrice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.base,s=e.quote;return r.a.createElement(m.a,{base_amount:n.amount,base_asset:n.asset_id,quote_amount:s.amount,quote_asset:s.asset_id,hide_value:a,hide_symbols:t})}},{key:"renderAuthorityList",value:function(e){return e.map(function(e){return r.a.createElement("span",null," ",r.a.createElement(i.a,{account:e}))})}},{key:"renderMarketList",value:function(e,t){var a=e.symbol;return t.map(function(e){if(e==a)return null;var t=e+"_"+a,n=e+"/"+a;return r.a.createElement("span",{key:t},r.a.createElement(s.a,{to:"/market/"+t},n)," "," ")}.bind(this))}},{key:"renderAboutBox",value:function(e,t){var a=E.b.getObject(e.issuer,!1,!1),n=a?a.get("name"):"",l=f.a.parseDescription(e.options.description),i=l.main,c=l.short_name?l.short_name:null,u=(i=i&&i.length>0?i+" ":i).match(/(http?):\/\/(www\.)?[a-z0-9\.:].*?(?=\s)/g),m=E.b.getAsset("1.3.0"),p=l.market?l.market:m?m.get("symbol"):"BTS";"bitasset"in e&&e.bitasset.is_prediction_market&&(p=(p=E.b.getAsset(e.bitasset.options.short_backing_asset))?p.get("symbol"):m.get("symbol")),e.symbol===m.get("symbol")&&(p="USD"),u&&u.length&&u.forEach(function(e){var t='<a target="_blank" rel="noopener noreferrer" href="'+e+'">'+e+"</a>";i=i.replace(e,t)});var d=b.a.replaceName(t),_=d.name,g=d.prefix;return r.a.createElement("div",{style:{overflow:"visible"}},r.a.createElement(h.a,{path:"assets/"+e.symbol,alt_path:"assets/Asset",section:"summary",symbol:(g||"")+_,description:i,issuer:n,hide_issuer:"true"}),c?r.a.createElement("p",null,c):null,r.a.createElement(s.a,{className:"button market-button",to:"/market/"+e.symbol+"_"+p},r.a.createElement(o.a,{content:"exchange.market"})))}},{key:"renderSummary",value:function(e){var t=this.props.getDynamicObject(e.dynamic_asset_data_id);t&&(t=t.toJS());var a=e.options,n=f.a.getFlagBooleans(e.options.flags,this.props.asset.has("bitasset_data_id")),s=Object.keys(n),l=t?r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(o.a,{content:"explorer.asset.summary.current_supply"})," "),r.a.createElement("td",null," ",r.a.createElement(u.a,{amount:t.current_supply,asset:e.id})," ")):null,c=t?r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(o.a,{content:"explorer.asset.summary.stealth_supply"})," "),r.a.createElement("td",null," ",r.a.createElement(u.a,{amount:t.confidential_supply,asset:e.id})," ")):null,m=n.charge_market_fee?r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(o.a,{content:"explorer.asset.summary.market_fee"})," "),r.a.createElement("td",null," ",a.market_fee_percent/100," % ")):null,d=n.charge_market_fee?r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(o.a,{content:"explorer.asset.summary.max_market_fee"})," "),r.a.createElement("td",null," ",r.a.createElement(u.a,{amount:+a.max_market_fee,asset:e.id})," ")):null;return r.a.createElement("div",{className:"asset-card no-padding"},r.a.createElement("div",{className:"card-divider"},r.a.createElement(p.a,{name:e.symbol})),r.a.createElement("table",{className:"table key-value-table table-hover"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(o.a,{content:"explorer.asset.summary.asset_type"})," "),r.a.createElement("td",null," ",this._assetType(e)," ")),r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(o.a,{content:"explorer.asset.summary.issuer"})," "),r.a.createElement("td",null," ",r.a.createElement(i.a,{account:e.issuer})," ")),r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(o.a,{content:"explorer.assets.precision"})," "),r.a.createElement("td",null," ",e.precision," ")),l,c,m,d)),r.a.createElement("br",null),this.renderFlagIndicators(n,s))}},{key:"renderPriceFeed",value:function(e,t){var a=r.a.createElement(o.a,{content:"explorer.asset.price_feed.title"}),n=e.bitasset;if(!("current_feed"in n))return r.a.createElement("div",{header:a});var s=n.current_feed,l=n.options.force_settlement_delay_sec,i=n.options.force_settlement_offset_percent,c=this.getGlobalSettlementPrice();return r.a.createElement("div",{className:"asset-card no-padding"},r.a.createElement("div",{className:"card-divider"},a),r.a.createElement("table",{className:"table key-value-table table-hover",style:{padding:"1.2rem"}},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(o.a,{content:"explorer.asset.price_feed.settlement_price"})," "),r.a.createElement("td",null," ",this.formattedPrice(s.settlement_price)," ")),r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(o.a,{content:"explorer.asset.price_feed.maintenance_collateral_ratio"})," "),r.a.createElement("td",null," ",s.maintenance_collateral_ratio/10,"%"," ")),r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(o.a,{content:"explorer.asset.price_feed.maximum_short_squeeze_ratio"})," "),r.a.createElement("td",null," ",s.maximum_short_squeeze_ratio/10,"%"," ")),r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(o.a,{content:"explorer.asset.price_feed.global_settlement_price"})," "),r.a.createElement("td",null," ",c||"-"," ")))),r.a.createElement("table",{className:"table key-value-table table-hover",style:{marginTop:"2rem"}},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(o.a,{content:"explorer.asset.price_feed.settlement_delay"})," "),r.a.createElement("td",null," ",r.a.createElement(g,{time:l})," ")),r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(o.a,{content:"explorer.asset.price_feed.force_settlement_offset"})," "),r.a.createElement("td",null," ",i/100,"% ")))))}},{key:"renderFeePool",value:function(e){var t=this.props.getDynamicObject(e.dynamic_asset_data_id);t&&(t=t.toJS());var a=e.options,n=E.b.getAsset("1.3.0");return r.a.createElement("div",{className:"asset-card no-padding"},r.a.createElement("div",{className:"card-divider"},r.a.createElement(o.a,{content:"explorer.asset.fee_pool.title"})),r.a.createElement(o.a,{component:"p",content:"explorer.asset.fee_pool.pool_text",unsafe:!0,asset:e.symbol,core:n.get("symbol")}),r.a.createElement("table",{className:"table key-value-table",style:{padding:"1.2rem"}},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(o.a,{content:"explorer.asset.fee_pool.core_exchange_rate"})," "),r.a.createElement("td",null," ",this.formattedPrice(a.core_exchange_rate)," ")),r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(o.a,{content:"explorer.asset.fee_pool.pool_balance"})," "),r.a.createElement("td",null," ",t?r.a.createElement(u.a,{asset:"1.3.0",amount:t.fee_pool}):null," ")),r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(o.a,{content:"explorer.asset.fee_pool.unclaimed_issuer_income"})," "),r.a.createElement("td",null," ",t?r.a.createElement(u.a,{asset:e.id,amount:t.accumulated_fees}):null," ")))))}},{key:"renderAssetOwnerUpdate",value:function(e){return r.a.createElement("div",{className:"grid-content small-no-padding",style:{overflowY:"visible"}},r.a.createElement("div",{className:"asset-card no-padding"},r.a.createElement("div",{className:"card-divider"},r.a.createElement(o.a,{content:"account.user_issued_assets.update_owner"})),r.a.createElement(o.a,{component:"p",content:"account.user_issued_assets.update_owner_text",asset:e.symbol}),r.a.createElement(F,{asset:e,account:this.props.currentAccount,currentOwner:e.issuer})))}},{key:"renderFeePoolFunding",value:function(e){return r.a.createElement("div",{className:"grid-content small-no-padding"},r.a.createElement("div",{className:"asset-card no-padding"},r.a.createElement("div",{className:"card-divider"},r.a.createElement(o.a,{content:"explorer.asset.fee_pool.fund"})),r.a.createElement(o.a,{component:"p",content:"explorer.asset.fee_pool.fund_text",asset:e.symbol}),r.a.createElement(w.a,{asset:e.symbol,funderAccountName:this.props.currentAccount,hideBalance:!0})))}},{key:"renderFeePoolClaiming",value:function(e){var t=this.props.getDynamicObject(e.dynamic_asset_data_id);return t&&(t=t.toJS()),r.a.createElement("div",{className:"grid-content small-no-padding"},r.a.createElement("div",{className:"asset-card no-padding"},r.a.createElement("div",{className:"card-divider"},r.a.createElement(o.a,{content:"explorer.asset.fee_pool.claim_balance"})),r.a.createElement(w.a,{asset:e.symbol,funderAccountName:this.props.currentAccount,dynamic:t,hideBalance:!0,type:"claim"})))}},{key:"renderPermissions",value:function(e){var t=e.options,a=f.a.getFlagBooleans(e.options.issuer_permissions,this.props.asset.has("bitasset_data_id")),n=Object.keys(a),s=a.charge_market_fee?r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(o.a,{content:"explorer.asset.permissions.max_market_fee"})," "),r.a.createElement("td",null," ",r.a.createElement(u.a,{amount:+t.max_market_fee,asset:e.id})," ")):null,l=r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement(o.a,{content:"explorer.asset.permissions.max_supply"})," "),r.a.createElement("td",null," ",r.a.createElement(u.a,{amount:+t.max_supply,asset:e.id})," "));a.white_list&&r.a.createElement("span",null,r.a.createElement("br",null),r.a.createElement(o.a,{content:"explorer.asset.permissions.blacklist_authorities"}),":  ",this.renderAuthorityList(t.blacklist_authorities),r.a.createElement("br",null),r.a.createElement(o.a,{content:"explorer.asset.permissions.blacklist_markets"}),":  ",this.renderMarketList(e,t.blacklist_markets),r.a.createElement("br",null),r.a.createElement(o.a,{content:"explorer.asset.permissions.whitelist_authorities"}),":  ",this.renderAuthorityList(t.whitelist_authorities),r.a.createElement("br",null),r.a.createElement(o.a,{content:"explorer.asset.permissions.whitelist_markets"}),":  ",this.renderMarketList(e,t.whitelist_markets));return r.a.createElement("div",{className:"asset-card no-padding"},r.a.createElement("div",{className:"card-divider"},r.a.createElement(o.a,{content:"explorer.asset.permissions.title"})," "),r.a.createElement("table",{className:"table key-value-table table-hover",style:{padding:"1.2rem"}},r.a.createElement("tbody",null,s,l)),r.a.createElement("br",null),this.renderPermissionIndicators(a,n),r.a.createElement("br",null))}},{key:"getMarginPositions",value:function(){var e=this.state.sortDirection,t={name:function(t,a){var n=E.b.getAccount(t.borrower,!1);n&&(n=n.get("name"));var r=E.b.getAccount(a.borrower,!1);return r&&(r=r.get("name")),n>r?e?1:-1:n<r?e?-1:1:0},price:function(t,a){return(e?1:-1)*(t.call_price.toReal()-a.call_price.toReal())},collateral:function(t,a){return(e?1:-1)*(a.getCollateral().getAmount()-t.getCollateral().getAmount())},debt:function(t,a){return(e?1:-1)*(a.amountToReceive().getAmount()-t.amountToReceive().getAmount())},ratio:function(t,a){return(e?1:-1)*(t.getRatio()-a.getRatio())}};return this.state.callOrders.sort(t[this.state.marginTableSort])}},{key:"getGlobalSettlementPriceFromSorted",value:function(e){if(console.log("global settlement sorted called"),!e||e.length<=0)return console.log("length array 0 passed in"),null;console.log("sortedCallOrders exists according to sorted get globa");var t=e[0],a=t.amountToReceive().getAmount(),n=t.getCollateral().getAmount();return r.a.createElement(m.a,{base_amount:n,base_asset:t.call_price.base.asset_id,quote_amount:a,quote_asset:t.call_price.quote.asset_id})}},{key:"getGlobalSettlementPrice",value:function(){if(!this.state.callOrders)return null;for(var e=null,t=null,a=this.state.callOrders.length,n=0;n<a;n++){var s=this.state.callOrders[n];null==e?(e=s,t=s.getRatio()):s.getRatio()<t&&(t=s.getRatio(),e=s)}if(null==e)return console.log("couldn't find the least col short"),null;var l=e.amountToReceive().getAmount(),o=e.getCollateral().getAmount();return r.a.createElement(m.a,{base_amount:o,base_asset:e.call_price.base.asset_id,quote_amount:l,quote_asset:e.call_price.quote.asset_id})}},{key:"renderPriceFeedData",value:function(e,t){var a=e.bitasset;if(!("feeds"in a)||0==a.feeds.length||a.is_prediction_market)return null;var n=(new Date).getTime(),s=new Date(n-1e3*e.bitasset.options.feed_lifetime_sec),l=a.feeds;if(!(l=l.filter(function(e){return new Date(e[1][0])>s}).sort(function(e,t){return new Date(t[1][0])-new Date(e[1][0])})).length)return null;for(var c=[],p=l[0][1][1].settlement_price,h=l[0][1][1].core_exchange_rate,f=r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{textAlign:"left"}}," ",r.a.createElement(o.a,{content:"explorer.asset.price_feed_data.publisher"})," "),r.a.createElement("th",{style:{textAlign:"right"}},r.a.createElement(o.a,{content:"explorer.asset.price_feed_data.settlement_price"}),r.a.createElement("br",null),"(",this.formattedPrice(p,!1,!0),")"),r.a.createElement("th",{style:{textAlign:"right"},className:"column-hide-small"},r.a.createElement(o.a,{content:"explorer.asset.price_feed_data.core_exchange_rate"}),r.a.createElement("br",null),"(",this.formattedPrice(h,!1,!0),")"),r.a.createElement("th",{style:{textAlign:"right"}}," ",r.a.createElement(o.a,{content:"explorer.asset.price_feed_data.maintenance_collateral_ratio"})," "),r.a.createElement("th",{style:{textAlign:"right"}}," ",r.a.createElement(o.a,{content:"explorer.asset.price_feed_data.maximum_short_squeeze_ratio"})," "),r.a.createElement("th",{style:{textAlign:"right"},className:"column-hide-small"}," ",r.a.createElement(o.a,{content:"explorer.asset.price_feed_data.published"})," "))),b=0;b<l.length;b++){var _=l[b],g=_[0],E=new Date(_[1][0]+"Z"),y=_[1][1].settlement_price,v=_[1][1].core_exchange_rate,k=_[1][1].maintenance_collateral_ratio/10+"%",w=_[1][1].maximum_short_squeeze_ratio/10+"%";c.push(r.a.createElement("tr",{key:g},r.a.createElement("td",null," ",r.a.createElement(i.a,{account:g})," "),r.a.createElement("td",{style:{textAlign:"right"}},this.formattedPrice(y,!0)),r.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"}," ",this.formattedPrice(v,!0)," "),r.a.createElement("td",{style:{textAlign:"right"}}," ",k),r.a.createElement("td",{style:{textAlign:"right"}}," ",w),r.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},r.a.createElement(d.a,{time:E}))))}var O=r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"clickable",onClick:this._toggleSortOrder.bind(this,"name"),style:{textAlign:"left"}},r.a.createElement(o.a,{content:"transaction.borrower"})),r.a.createElement("th",{className:"clickable column-hide-small",onClick:this._toggleSortOrder.bind(this,"collateral")},r.a.createElement(o.a,{content:"transaction.collateral"}),this.state.callOrders.length?r.a.createElement("span",null," (",r.a.createElement(u.a,{amount:this.state.callOrders[0].getCollateral().getAmount(),asset:this.state.callOrders[0].getCollateral().asset_id,hide_amount:!0})," ",")"):null),r.a.createElement("th",{className:"clickable column-hide-small",onClick:this._toggleSortOrder.bind(this,"debt")},r.a.createElement(o.a,{content:"transaction.borrow_amount"}),this.state.callOrders.length?r.a.createElement("span",null," (",r.a.createElement(u.a,{amount:this.state.callOrders[0].amountToReceive().getAmount(),asset:this.state.callOrders[0].amountToReceive().asset_id,hide_amount:!0})," ",")"):null),r.a.createElement("th",{style:{paddingRight:10},className:"clickable column-hide-small"},r.a.createElement("span",{onClick:this._toggleSortOrder.bind(this,"price")},r.a.createElement(o.a,{content:"exchange.call"})),this.state.callOrders.length?r.a.createElement("span",null," (",r.a.createElement(m.a,{base_amount:this.state.callOrders[0].call_price.base.amount,base_asset:this.state.callOrders[0].call_price.base.asset_id,quote_amount:this.state.callOrders[0].call_price.quote.amount,quote_asset:this.state.callOrders[0].call_price.quote.asset_id,hide_value:!0,noPopOver:!0}),")"):null),r.a.createElement("th",null,r.a.createElement(o.a,{content:"borrow.coll_ratio_target"})),r.a.createElement("th",{className:"clickable",onClick:this._toggleSortOrder.bind(this,"ratio")},r.a.createElement(o.a,{content:"borrow.coll_ratio"})))),x=t.map(function(e){return r.a.createElement("tr",{className:"margin-row",key:e.id},r.a.createElement("td",null,r.a.createElement(i.a,{account:e.borrower})),r.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},r.a.createElement(u.a,{amount:e.getCollateral().getAmount(),asset:e.getCollateral().asset_id,hide_asset:!0})),r.a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},r.a.createElement(u.a,{amount:e.amountToReceive().getAmount(),asset:e.amountToReceive().asset_id,hide_asset:!0})),r.a.createElement("td",{style:{textAlign:"right",paddingRight:10},className:"column-hide-small"},r.a.createElement(m.a,{base_amount:e.call_price.base.amount,base_asset:e.call_price.base.asset_id,quote_amount:e.call_price.quote.amount,quote_asset:e.call_price.quote.asset_id,hide_symbols:!0})),r.a.createElement("td",{style:{textAlign:"right",paddingRight:10}},e.order.target_collateral_ratio?(e.order.target_collateral_ratio/1e3).toFixed(3):"-"),r.a.createElement("td",{className:e.getStatus(),style:{textAlign:"right"}},e.getRatio().toFixed(3)))});return r.a.createElement("div",{className:"grid-block"},r.a.createElement("div",{className:"grid-content no-padding"},r.a.createElement("div",{className:""},r.a.createElement(I.b,{defaultActiveTab:0,segmented:!1,setting:"bitassetDataTabs"},r.a.createElement(I.a,{title:"explorer.asset.price_feed_data.title"},r.a.createElement("table",{className:" table order-table table-hover",style:{padding:"1.2rem"}},f,r.a.createElement("tbody",null,c))),r.a.createElement(I.a,{title:"explorer.asset.margin_positions.title"},r.a.createElement("table",{className:" table order-table table-hover",style:{padding:"1.2rem"}},O,r.a.createElement("tbody",null,x)))))))}},{key:"render",value:function(){var e=this.props.asset.toJS(),t=this.getMarginPositions(),a="bitasset"in e?this.renderPriceFeed(e,t):null,n="bitasset"in e?this.renderPriceFeedData(e,t):null;return r.a.createElement("div",{className:"grid-container asset-page"},r.a.createElement("div",{className:"grid-block page-layout"},r.a.createElement("div",{className:"grid-block main-content wrap"},r.a.createElement("div",{className:"grid-block medium-up-1",style:{width:"100%"}},this.renderAboutBox(e,this.props.asset)),r.a.createElement(I.b,{setting:"assetDataTabs",className:"grid-block vertical",tabsClass:"bordered-header content-block",contentClass:"tab-no-background",segmented:!1},r.a.createElement(I.a,{title:"explorer.asset.info"},r.a.createElement("div",{className:"grid-block vertical large-horizontal medium-up-1 large-up-2",style:{paddingTop:"1rem"}},r.a.createElement("div",{className:"grid-content small-no-padding"},this.renderSummary(e)),r.a.createElement("div",{className:"grid-content small-no-padding"},this.renderPermissions(e)),r.a.createElement("div",{className:"grid-content small-no-padding"},this.renderFeePool(e)),a?r.a.createElement("div",{className:"grid-content small-no-padding"},this.renderPriceFeed(e)):null),n||null),r.a.createElement(I.a,{title:"explorer.asset.actions"},r.a.createElement("div",{className:"grid-block vertical large-horizontal medium-up-1 large-up-2",style:{paddingTop:"1rem"}},this.renderAssetOwnerUpdate(e),this.renderFeePoolFunding(e),this.renderFeePoolClaiming(e)))))))}}]),t}();H=Object(x.connect)(H,{listenTo:function(){return[O.a]},getProps:function(){return{currentAccount:O.a.getState().currentAccount||O.a.getState().passwordAccount}}}),H=Object(c.a)(H,{propNames:["backingAsset"]});var V=function(e){function t(){return J(this,t),M(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return W(t,r.a.Component),L(t,[{key:"render",value:function(){if(null===this.props.asset)return r.a.createElement(k.a,{subtitle:"asset_not_found_subtitle"});var e=this.props.asset.has("bitasset")?this.props.asset.getIn(["bitasset","options","short_backing_asset"]):"1.3.0";return r.a.createElement(H,B({},this.props,{backingAsset:e}))}}]),t}();V=Object(c.a)(V,{withDynamic:!0});var Y=function(e){function t(){return J(this,t),M(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return W(t,r.a.Component),L(t,[{key:"render",value:function(){var e=this.props.match.params.symbol.toUpperCase();return r.a.createElement(V,B({},this.props,{asset:e}))}}]),t}();t.default=Y}}]);